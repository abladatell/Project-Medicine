<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>myMedicationApp</title>
<link href="https://fonts.googleapis.com/css?family=Fredericka+the+Great" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
<link rel="stylesheet" type="text/css" href="./css/mediaquery.css">
<link rel="stylesheet" type="text/css" href="./css/homepagestyle.css">
</head>
<body>
  <div id='myheader'></div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="jquery.js"></script>

<!-- Firebase initialization and logout function -->
<!-- TODO: Figure out how to transfer authentication over -->
<script>
  // Initialize Firebase
  var config = {
      apiKey: "AIzaSyAS4eP5OxjbqdOfigIf9s3ICIfLB723WjM",
      authDomain: "project-medicine-e92db.firebaseapp.com",
      databaseURL: "https://project-medicine-e92db.firebaseio.com",
      projectId: "project-medicine-e92db",
      storageBucket: "project-medicine-e92db.appspot.com",
      messagingSenderId: "625232278011"
  };
  firebase.initializeApp(config);

  const db = firebase.database();

  // Reference to current users info in authentication.
  var user = firebase.auth().currentUser;
  console.log(user);
  // Reference to current users id.
  var id = sessionStorage.getItem("uid");

  /**
  const logOut = document.getElementById("logout")
  logOut.addEventListener("click", e => {
      console.log("Signing out");
      firebase.auth().signOut();
  });
**/
  // Checks if logged in, and if not redirects to login page.
  firebase.auth().onAuthStateChanged(firebaseUser => {
      if (firebaseUser) {
          // TODO: REMOVE THIS ONCE DONE BUGTESTING
          console.log(user);
      } else {
          console.log("not logged in");
          window.location.href = "../login/index.html";
      }
  });

  function logOut(){
    console.log("Logged Off");
    firebase.auth().signOut();

  };
  </script>
</body>
</html>
